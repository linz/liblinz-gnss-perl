#
AnonymousFtpPassword  positionz@linz.govt.nz
#
# FtpPassive can be default, on, or off.
FtpPassive            on

# ScratchDir may be overridden by LINZGNSS_TMP_DIR
ScratchDir            /tmp

#  Station coordinate models
#  RefStationDir may be overridden by POSITIONZ_REFSTATION_DIR
#  Cache will be disabled if POSITIONZ_REFSTATION_NO_CACHE is defined
#  RefStationCacheDir is a subdirectory of RefStationDir unless it
#  starts with a /

<RefStations>
    ModelFilename  [ssss].xml 
    Directory       ${D||/var/lib/bernese52/datapool}/LINZ/ref_stations
    CacheDir  cache

    # Ranking factors for selecting reference stations.
    #
    # Exclude stations within 5 metres to avoid using a PostioNZ station for data
    # from that station (not realistic except for testing/academic purposes)

    RankDistanceFactor <<EOD
            4.99         0
            5       100
        30000        95
        200000        87
        500000        70
        5000000         0
    EOD

    RankCosineFactor     10
</RefStations>

# Alternative - station coordinates from GNSS datum processing coordinate API
# The CoordApiUrl can be overridden by environment variable POSITIONZ_COORDAPI_URL
# 
# Multiple strategies may be selected. Each station will take its coordinates from the first strategy in which they are available.
# (subject to there being at least MinDays coordinates available in the range of days before and after the required date).  The station
# will not be used if none of the selected strategies has matching coordinate data.


# <RefStations>
#     CoordApiUrl  http://results.prod.gnss-processing.awsint.linz.govt.nz/api/v1 
#     # RefStationDir       ${D||/var/lib/bernese52/datapool}/LINZ/ref_stations
#     Strategies  d14f p14f p14r
#     Codes AUCK BLUF CHAT CHTI CORM DNVK DUND GISB GLDB HAAS HAMT HAST HIKB HOKI KAIK KTIA LEXA LKTA MAHO MAST MAVL METH MQZG MTJO NLSN NPLY OUSD PYGR TAUP TRNG VGMT WAIM WANG WARK WEST WGTN WGTT WHKT WHNG WRPA
#     Method median
#     DaysBefore 35
#     DaysAfter 14
#     MinDays 10

#     If Datum is specified then coordinates will be converted to this datum.  Otherwise they will be in the datum of the source strategy
#     Datum ITRF2014

#     # Ranking factors for selecting reference stations.
#     #
#     # Exclude stations within 5 metres to avoid using a PostioNZ station for data
#     # from that station (not realistic except for testing/academic purposes)

#     RankDistanceFactor <<EOD
#             4.99         0
#             5       100
#         30000        95
#         200000        87
#         500000        70
#         5000000         0
#     EOD

#     RankCosineFactor     10
# </RefStations>


# Notes on gnss data abbreviation formats:
# (Codes can be lower case or upper case, corresponding case will apply to 
# substituted string)
#
# Abbreviation     Description
# ssss             4 character station code (lower case)
# yy               Year (two digits)
# ddd              Day of Year (DOY)
# dddh             DOY + hourly session character indicating
#                  the hourly session A - X (00-23)
# yyyy             Year (four digits)
# wwww             GPS Week
# ww               2-digit week of year(00-51)
# wwww             GPS Week
# d                Day of week (0 = Sunday)
# hh               The UTC hour for which the orbit product was created
# h                Hour as a letter a-x
#
# jobid            The id of the current job
# type             The data type
# subtype          The data subtype
#
#
# DataTypes: These are the naming convensions used in the local repository.
# Any data downloaded from a data center that does not conform to these specs
# will be converted. The defined data format are also the defaults used for
# each data center. These format follow the above stated gnss abbreviations.
#
# Refer to annotated example below for datacenter tag structure:
#
#<DataTypes>
#    // First level is data type
#    <OBS>
#        // Second level is data subtype
#        <DAILY>
#            filename [ssss][ddd][h].[yy]d.Z
#            // Defines the file name format for the datatype.  The filename can include 
#            // wildcards ? (single arbitrary character) or * (0 or more arbitrary characters)
#            // provided the wildcard filename uniquely matches a file in the file path.  This
#            // is only available if the DataCenter supports listing files in a directory.  
#            // Wildcards cannot be used for DataCenters to which files are written.
#            path [yyyy]/[ddd]/
#            // Defines the path to the data file from the base path of the data center
#            compression ..
#            // The compression of the data type
#            // Valid values are
#            // auto (default - type is inferred based on CompressionSuffices configuration)
#            // none
#            // compress
#            // gzip
#            // hatanaka
#            // hatanaka+compress
#            // hatanaka+gzip
#            freq Hourly
#            // Defines the frequency of in which files occur. The option
#            // Hourly, 6Hourly, Daily, Weekly.
#            supply_frequency
#            // Defines the frequency with which files are supplied.
#            latency ...
#            // Defines the time after the end of the interval when the data is expected
#            // to be available.  The time is formatted as one of
#            // ### minutes
#            // ## hours
#            // ## days 
#            expires 2 days
#            // Defines the longest time before the current time that the file 
#            // is valid (for rapid files that are overwritten)
#            retry 1 day
#            // The frequency that the data will be retried if it is not 
#            // available
#            max_delay 30 days
#            // The period after the nominal available data when the data
#            // will be deemed unavailable
#            retention 2 days
#            // The minimum time after downloading for which data will be retained
#            priorty #
#            // The integer priority of the subtype - the lower the value the higher 
#            // the priority.  
#        </DAILY>
#        <HOURLY>
#            ...
#        </HOURLY>
#    </OBS>
#    // 'FINAL', 'RAPID', 'ULTRA' or 'BROADCAST'
#    <ORB>
#        <FINAL>
#            ...
#        </FINAL>
#        <RAPID>
#            ...
#        </RAPID>
#    </ORB>
#    // 'FINAL', 'RAPID' or 'ULTRA'
#    <ERP>
#        <ULTRA>
#            ...
#        </ULTRA>
#    </ERP>
#</DataTypes>
#

# Each compression type is define by
#   a name used to define it in data types
#   a command to run it using [input] and [output] for the input and output file names
#   a presuffix that is added to the filename before the command is run
#   a postsuffix that is removed from the filename after the command is run
#
# Decompression is defined by using "-typename" as the name
#
<CompressionTypes>
   <Compression>
       name hatanaka
       compress /usr/bin/rnx2crx -f [input] 
       uncompress /usr/bin/crx2rnx -f [input]
       presuffix .ddo
       postsuffix .ddd
   </Compression>
   <Compression>
       name compress
       compress /usr/bin/compress -f [input] 
       uncompress /usr/bin/compress -f -d [input] 
       presuffix 
       postsuffix .Z
   </Compression>
   <Compression>
       name gzip
       compress /bin/gzip -f -9 [input] 
       uncompress /bin/gzip -f -d [input] 
       presuffix 
       postsuffix .gz
   </Compression>
</CompressionTypes>

# If compression type is specified as "auto" then this list is used to 
# select the type based on the filename.  The first matching regular 
# expression applies.

CompressionSuffices <<EOD
    \d\dd      hatanaka
    \d\dd\.Z   hatanaka+compress
    \d\dd\.gz  hatanaka+gzip
    \.crx      hatanaka
    \.crx.Z    hatanaka+compress
    \.crx.gz   hatanaka+gzip
    \.Z        compress
    \.gz       gzip
EOD

<DataTypes>
    <OBS>
        <DAILY>
            name Daily RINEX file
            priority 2
            filename [ssss][ddd]0.[yy]d.Z
            path  rinex/daily/[yyyy]/[ddd]
        </DAILY>
        <HOURLY>
            name Hourly RINEX file
            priority 1
            filename [ssss][ddd][h].[yy]d.Z
            frequency Hourly
            path  rinex/hourly/[yyyy]/[ddd]/[hh]
            retention 2 days
        </HOURLY>
    </OBS>
    <ORB>
        <BROADCAST>
            name Broadcast orbits
            filename auto[ddd]0.[yy]n.Z
            path  orbit/broadcast/[yyyy]/[ddd]
        </BROADCAST>
        <CODE>
            name CODE orbits
            filename cod[wwww][d].sp3.Z
            path  orbit/final/[wwww]
        </CODE>
        <CO2>
            name CODE Repro2 orbits
            filename co2[wwww][d].sp3.Z
            path  orbit/final/[wwww]
        </CO2>
        <CODE_MGEX>
            name CODE Multi-GNSS orbits
            frequency Daily
            supply_frequency Weekly
            latency 7 days
            filename com[wwww][d].sp3.Z
            path  orbit/final/[wwww]
        </CODE_MGEX>
        <FINAL>
            name Final orbits
            priority 4
            filename igs[wwww][d].sp3.Z
            path  orbit/final/[wwww]
        </FINAL>
        <RAPID>
            name Rapid orbits
            priority 3
            filename igr[wwww][d].sp3.Z
            path  orbit/rapid/[wwww]
            retention 30 days
        </RAPID>
        <ULTRA>
            name Ultra-rapid orbits
            priority 2
            filename igu[wwww][d]_[hh].sp3.Z
            path  orbit/ultra/[wwww]
            frequency 6Hourly
            retention 7 days
        </ULTRA>
    </ORB>
    <ERP>
        <CODE>
            name CODE earth rotation parameters
            filename cod[wwww][d].erp.Z
            path  erp/final/[wwww]
        </CODE>
        <CO2>
            name CODE Repro2 earth rotation parameters
            filename co2[wwww][d].erp.Z
            path  erp/final/[wwww]
        </CO2>
        <CODE_MGEX>
            name CODE Multi-GNSS earth rotation parameters
            frequency Daily
            supply_frequency Weekly
            latency 7 days
            filename com[wwww][d].erp.Z
            path  erp/final/[wwww]
        </CODE_MGEX>
        <FINAL>
            name Final earth rotation parameters
            priority 4
            filename igs[wwww]7.erp.Z
            frequency Weekly
            path  erp/final/[wwww]
        </FINAL>
        <RAPID>
            name Rapid earth rotation parameters
            priority 3
            filename igr[wwww][d].erp.Z
            path  erp/rapid/[wwww]
            retention 30 days
        </RAPID>
        <ULTRA>
            name Ultra-rapid earth rotation parameters
            priority 2
            filename igu[wwww][d]_[hh].erp.Z
            frequency 6Hourly
            path  erp/ultra/[wwww]
            retention 7 days
        </ULTRA>
    </ERP>
    <CLK>
        <CODE>
            name Final clock file
            priority 4
            filename cod[wwww][d].clk.Z
            path  clock/final/[wwww]
        </CODE>
        <FINAL>
            name Final clock file
            priority 4
            filename igs[wwww][d].clk.Z
            path  clock/final/[wwww]
        </FINAL>
        <RAPID>
            name Rapid clock file
            priority 3
            filename igr[wwww][d].clk.Z
            path  clock/rapid/[wwww]
            retention 30 days
        </RAPID>
    </CLK>
    <ION>
       <FINAL>
           name  Bernese CODE ionosphere model
           priority 4
           filename COD[wwww][d].ION.Z
           path code/ion/[yyyy]/[ddd]
       </FINAL>
       <RAPID>
           name  Bernese CODE rapid ionosphere model
           priority 3
           filename COD[wwww][d]R.ION.Z
           path code/ion/[yyyy]/[ddd]
       </RAPID>
       <PREDICT>
           name  Bernese CODE predicted ionosphere model
           priority 2
           filename COD[wwww][d]P.ION.Z
           path code/ion/[yyyy]/[ddd]
           latency -1 days
       </PREDICT>
    </ION>

#  This is only available for EUREF solution
#    <INX>
#       <FINAL>
#           name  Bernese Ionosphere maps
#           priority 4
#           filename COD[wwww][d].INX.Z
#           path /code/inx/[yyyy]/[ddd]
#       </FINAL>
#    </INX>
    <TRP>
       <FINAL>
           name  Bernese Troposphere parameters
           priority 4
           filename COD[yy][ddd].TRP.Z
           path /code/trp/[yyyy]/[ddd]
       </FINAL>
    </TRP>
    <P1C1>
        <FINAL>
           name CODE monthly P1-C1 DCB solutions (GPS satellites only)
           priority 4
           filename P1C1[yy][mm].DCB.Z
           path /code/p1c1/[yyyy]
        </FINAL>
        <RAPID>
           name CODE P1-C1 DCB moving average solution (GPS satellites only)
           priority 3
           filename P1C1[yy][mm]R.DCB.Z
           path /code/p1c1/[yyyy]
           retention 7 days
           latency -1 day
        </RAPID>
    </P1C1>
    <P1P2>
        <FINAL>
           name CODE monthly P1-P2 DCB solutions (GPS and Glonass satellites)
           priority 4
           filename P1P2[yy][mm].DCB.Z
           path /code/p1p2/[yyyy]
        </FINAL>
        <RAPID>
           name CODE P1-P2 DCB moving average solution (GPS and Glonass satellites)
           priority 3
           filename P1P2[yy][mm]R.DCB.Z
           path /code/p1p2/[yyyy]
           retention 7 days
           latency -1 day
        </RAPID>
    </P1P2>
    <VMF>
       <VMF>
           name  Vienna atmospheric mapping functions
           priority 4
           filename VMFG_[yyyy][mm][dd].H[hh]
           frequency 6Hourly
           path vmf/[yyyy]/[ddd]
       </VMF>
    </VMF>
    <IGSC>
       <WEEKLY>
           name IGS weekly station solution SINEX file
           priority 4
           filename igs[yy]P[wwww].snx.Z
           path /igsc/[wwww]
       </WEEKLY>
       <DAILY>
           name IGS daily station solution SINEX file
           priority 3
           filename igs[yy]P[wwww][d].snx.Z
           path /igsc/[wwww]
       </DAILY>
    </IGSC>
</DataTypes>


# Stations lists can be used in data centre definitions.  Each entry is a list 
# of stations codes.  These can be referenced as @listname in the datacentre 
# Stations and NotStations attributes.  Each list is a space separated list of
# station codes.

<StationLists>

# Note: stations dunt, ldrz, lytt, and ousd are publicly accessible owned by 
# University of Otago and NIWA

geonet=<<EOD
     2406 ahti akto arta auck aukt avln bhst birf bluf
     bnet bthl cast chti ckid clim clrr cmbl cncl cnst
     corm dnvk dund durv frtn gisb gldb glok gnbk grng
     gunr haas hamt hana hanm hast hikb hoki hold horn
     kahu kaik kapt kara kawk kere koko koro ktia kuta
     levn lexa leyl lkta look maha mahi maho mako mang
     matw mavl mcnl meth ming mkno mnhr mqzg mrbl mtbl
     mtjo mtpr mtqn nlsn nmai nply nrrd nrsw ohin okoh
     optk oroa otak paek paki pali pari parw pawa pgkh
     pgne pilk pkno pnui pora prtu ptoi puke pygr quar
     rahi rakw raul raum rawi rdlv rgar rgaw rghd rghl
     rghr rgka rgkw rgli rgmk rgmt rgon rgop rgre rgrr
     rgta rgut rgwc rgwi rgwv ripa sctb sedd snst sutt
     takp taup tauw tema ten2 tenn tgho tghr tgoh tgra
     tgri tgtk tgwh thap tint tkar tkhl tory trav trng
     trwh turi vexa vget vgfw vgkr vgmo vgmt vgng vgnt
     vgob vgot vgpk vgtm vgtr vgts vgwh vgwn vgwt wahu
     waim waka wang wark west wgtn wgtt whkt whng whvr
     with wmat wpaw wpuk wrau wrpa yald
EOD

privatecors=<<EOD
     esbr esc2 escm eskv esqt esrn estr
     gsaa gsab gsal gsam gsay gsba gsbd gsbl gsbn gsbr
     gsc1 gscc gsch gscr gsct gscv gsdr gsgr gsht gshw
     gskk gsli gslw gslx gsmh gsnl gso0 gsom gsox gspk
     gspm gspn gspo gspu gsqt gsra gsrl gsro gssb gsta
     gsth gsti gstk gstw gsut gswa gswh gswi gswk gswr
     ppcw ppk2 ppkm ppmk ppor pppk pprs ppsp ppwh
     syas sycc sycm syet syfr syha syka sylh symm syoi
     syox sypn sypr syqn syta sytm syts
     vak2 vaka vale vasb vash vbrm vchr vdun vham vhn2
     vhra vhvn vlee vmay vmcs vmka vmrt vnpe vnpl voto
     vpct vpmr vpn2 vpoa vprk vpt2 vpuk vptn vrng vrot
     vshf vtea vtek vtem vthm vtim vtok vtwa vwan vwhk
     vwig vwk2 vwkn vwku vwmr vwpk vzqn vwm2
EOD

publiccors=<<EOD
     dunt ldrz lytt ousd
EOD

rdmn=<<EOD
    1094 1102 1103 1104 1107 1108 1109 1112 1115 1145
    1147 1151 1152 1162 1165 1166 1168 1172 1173 1175
    1181 1182 1185 1186 1189 1190 1192 1195 1196 1204
    1210 1230 1233 1235 1236 1238 1258 1260 1273 1274
    1279 1281 1295 1297 1305 1331 1344 1361 1384 1394
    1432 1433 1436 1501 1502 2386 2389 2392 2393 3582
    3584 3585 3607 3608 3624 3662 4001 4036 6701 6703
    6704 6705 6706 6708 6709 6711 6712 6713 6714 6717
    6719 6721 6722 6723 6724 6725 6726 6728 6729 6730
    6731 6733 6734 6735 6736 6737 6738 6739 6740 6754
    6757 6767 6769 6770 6776 6784 6786 6787 6788 6790
    6791 6792 6793 6794 a00a a05e a071 a0yh a26y a2j7
    a2l2 a2qg a33d a3q5 a3r9 a3ru a3t4 a3t8 a3uj a3uu
    a3v8 a3vn a3wb a3wj a3y4 a41n a42f a44v a48q a49q
    a4bq a4fk a4mf a4pg a4uh a54b a55j a55w a593 a598
    a5af a5ck a5lc a5mc a5np a5pd a5t0 a5tj a61n a68v
    a6fq a6gp a6ju a6lt a6m0 a6p7 a6q1 a6x8 a71t a71v
    a7fm a7r1 a7w4 a7we a8f0 a8gb a8je a8n1 a8tx a93q
    a93w a9fj a9fl a9fw a9mk a9mt aa2m aa8h aab0 aad3
    aadg aaej aaey aaj0 aaj1 aaj4 aaja aaju aakq aaqy
    aar7 aar8 aara aarc aaup aayd ac68 ac6k ac72 ac73
    ac76 ac7g ac7m ac7w ac8p acc5 acgf acmy acqy acvh
    acvn adq1 adtf adw0 adwd ae20 ae3w ae4q aeb3 aecd
    aelf aemc aemr aevv af5n af68 afb7 afjy aftc afun
    aglh ahm8 am7g ap5e ap5t ap60 b000 b001 b0pc b0pd
    b0t9 b0tb b15j b19t b19w b1du b1ep b1hk b1lv b1p3
    b1rg b1tf b1wa b2bh b2fq b2nb b2nl b2p3 b36j b39p
    b3bd b3ju b42l b7tk b7v0 b8cy b8dp b8k9 b8km b8l1
    b8wl b8wm b8wn b8wp b8wq b8wr b8wt b8wu b8wv b8ww
    b8wx b8wy b8x0 b8x1 b8x3 b8x4 b8x5 b8x6 b8x8 b8xb
    b8xc b8xd b8xe b8xf b8xg b8xh b8xj b8xl b8xm b8xn
    b8xp b8xq b8xr b8xt b8xu b8xv b8y2 b8y3 b9f3 b9fb
    b9fc bc7h bd87 bd89 bugk cajp ddau df68 dffl dn4j
    drlx ec0t eejg ej0c ejty er3b ewwl gds2 mul2 
    6731 b39y exff exfg exfh exfj exfk exfl exfm exfn
    exfp exfq exfr exft exfv exfw exfx exfy 
EOD

</StationLists>


# DataCenter: This defines the repository information such as the name, uri,
# and data files that are required from each. Each datafile must have a
# definition in the DataTypes tag. The datafile tag can override the format
# tag, and should include a path element on where to find the data relative to
# the base uri.
#
# Refer to annotated example below for datacenter tag structure:

# DataCenter tag attribute is the datacenter id used for choosing the order in
# which centers will be downloaded from
#<DataCenter 1>
#    // Defines the priority of the data centre in selecting for downloading
#    // files.  Higher (numerically) priority data centres are used in preference to lower
#    Priority n
#    // Provides a name for the center. Used for naming in logging
#    Name EXAMPLE
#    // Defines ftp host and optionally user/password and port for server
#    Uri ftp://user:password@exampleserver.com:21
#    // Explicitly define user credentials for the data center, either as 
#    // user and password, or by the name of a credentials file containing
#    // records 
#    //   user username
#    //   password password
#    // Credentials file override User/Password, which override user and 
#    // password defined in Uri.
#    FileListUriPath /[path]/listfiles
#    // For http servers this is an optional URI used to retrieve a list of files from the 
#    // server.  This is relative to the DataCenter Uri.  It should include [path] defining the 
#    // filepath to be listed.
#    FileListRegex ^\d+\s+(\S+)\s*$
#    // Optional regular expression to identify the filename within a line returned by the FileListUri.
#    // The filename is the first (only) capture group defined by the regular expression.  If this is not 
#    // specified then the first string of non-blank characters is used.
#    User username
#    Password password
#    CredentialsFile filename
#    // Stations supported by the datacentre (for station based products)
#    // A request for data may require that the data centre explicitly support that
#    // station, in which case it must include the station in its list.  Otherwise 
#    // it may be matched if the station list is not defined or if it includes a 
#    // wildcard '*'
#    Stations tst1 tst2 tst3
#    Stations tst4 tst5 tst6
#    Stations *
#    // If the wildcard is available then any station may be matched except those
#    // explicitly excluded in the NotStations list
#    NotStations tst1 tst2
#    // Both the station lists and notstation lists can include @stationlist name
#    // to reference the stations in a station list (as above).
#    <Datafiles>
#    // Observable datatypes that datacenter supports. Use the same structure
#    // as the datatypes tag
#    <OBS>
#        <DAILY>
#            // Path on server to the datatype files
#            path /pub/rinex/obs/[yyyy]/[ddd]
#           // Specifies the daily obs file station codes which the server can
#           // provide. Note that multiple tag keys can be listed for ease of
#           // formating
#        </DAILY>
#        <HOURLY>
#            path /pub/hourly/rinex/[yyyy]/[ddd]
#            // Specifies the hourly obs file station codes which the server can
#            // provide. In some case sites might only provide daily files to
#            // the datacenter so this just provides a short circuit in checking
#            // for the files. If this tag key is not specified then it is
#            // assumed that that the all of the daily obs files also have
#            // hourly files.
#            stations tst1 tst2 tst3
#            stations tst4 tst5
#        </HOURLY>
#    </OBS>
#    // Product datatypes that datacenter supports. Use the same structure
#    // as the datatypes tag
#    <ORB>
#        <FINAL>
#            path /pub/products/[wwww]
#        </FINAL>
#    </ORB>
#    <ORB>
#        <RAPID>
#            path /pub/products/[wwww]
#        </RAPID>
#    </ORB>
#    <ERP>
#        <ULTRA>
#            path /pub/products/[wwww]
#        </ULTRA>
#    </ERP>
#    </Datafiles>
#</DataCenter>
#
#    DataCenter types and associated specific parameters are:
#       File:
#       Ftp (readonly)
#          Timeout 
#          Passive
#       GNSSArchive (readonly)
#          AuthUri
#          AlternativeUri
#       S3Bucket (readonly)
#          S3BucketAwsParameters


# Note: Added geonet stations may obscure corresponding IGS stations
# eg BTHL.
#
#	Stations bthl avln trwh yald hanm

<DataCenters>

    <DataCenter>
        priority 70
        Name LINZ-GNSSArchive-public
        Uri https://public.archive.geodesy.linz.govt.nz
        Stations @publiccors @geonet
        <Datafiles>
            <OBS>
                <DAILY>
                    path /rnx2_daily_30s/[yyyy]/[ddd]
            	    filename [ssss][ddd]0.[yy]d.gz
                    compression hatanaka+gzip
                </DAILY>
                <HOURLY>
                    path /rnx2_hourly_30s/[yyyy]/[ddd]/[hh]
                    filename [ssss][ddd][h].[yy]d.gz
                    compression hatanaka+gzip
                    latency 15 minutes
                </HOURLY>
            </OBS>
        </Datafiles>
    </DataCenter>


    <DataCenter>
        priority 70
        Name LINZ-GNSSArchive
        Type GNSSArchive
        AuthKeyUri https://search.archive.geodesy.linz.govt.nz/v1/urlAuth
        Uri https://private.archive.geodesy.linz.govt.nz
        CredentialsFile ${GNSS_ARCHIVE_AUTH_FILE||${HOME}/linz-gnss-credentials}
        Stations @privatecors
        <Datafiles>
            <OBS>
                <DAILY>
                    path /rnx2_daily_30s/[yyyy]/[ddd]
            	    filename [ssss][ddd]0.[yy]d.gz
                </DAILY>
                <HOURLY>
                    path /rnx2_hourly_30s/[yyyy]/[ddd]/[hh]
                    filename [ssss][ddd][h].[yy]d.gz
                    latency 15 minutes
                </HOURLY>
            </OBS>
        </Datafiles>
    </DataCenter>
        

    <DataCenter>
        priority 60
        Name GeoNET-PNZ
        Uri https://data.geonet.org.nz
        Stations @geonet
        <Datafiles>
            <OBS>
                <DAILY>
            	    filename [ssss][ddd]0.[yy]o.gz
                    path /gnss/rinex/[yyyy]/[ddd]
                </DAILY>
                <HOURLY>
            	    filename [ssss][ddd][h].[yy]o.gz
                    path /gnss/rinexhourly/[yyyy]/[ddd]
                    latency 15 minutes
                </HOURLY>
            </OBS>
        </Datafiles>
    </DataCenter>
    
    <DataCenter>
        priority 30
        Name UNAVCO
        Uri ftp://anonymous:positionz@linz.govt.nz@data-out.unavco.org
        Stations rob4 buri min0
        Stations *
        Notstations @geonet @privatecors
        <Datafiles>
            <OBS>
                <DAILY>
                    path /pub/rinex/obs/[yyyy]/[ddd]
                </DAILY>
                <HOURLY>
                    path /pub/hourly/rinex/[yyyy]/[ddd]/[ssss]
                    latency 15 minutes
                </HOURLY>
            </OBS>
        </Datafiles>
    </DataCenter>
    
    <DataCenter>
        priority 50
        Name SOPAC
        Uri ftp://anonymous:positionz@linz.govt.nz@garner.ucsd.edu
        Stations mac1 mcm4 mobs pert yarr yar2 yarr nnor karr darr darw
        Stations sunm cedu alic sydn str1 str2 tid2 tid1 tidb coco lae1
        Stations fale aspa cas1 dav1 davr mkea tow2 jab1 noum rob4 buri
        Stations min0
        Stations *
        NotStations @geonet @privatecors
        <Datafiles>
            <OBS>
                <DAILY>
                    path /pub/rinex/[yyyy]/[ddd]
                </DAILY>
                <HOURLY>
                    path /pub/nrtdata/[yyyy]/[ddd]/[hh]
                    latency 15 minutes
                </HOURLY>
            </OBS>
            <ORB>
                <FINAL>
                    path /pub/products/[wwww]
                    supply_frequency weekly
                    latency 12 days
                </FINAL>
                <RAPID>
                    path /pub/products/[wwww]
                    latency 17 hours
                </RAPID>
                <ULTRA>
                    path /pub/products/[wwww]
                    latency 3 hours
                </ULTRA>
                <BROADCAST>
                    path /pub/rinex/[yyyy]/[ddd]
                </BROADCAST>
            </ORB>
            <ERP>
                <FINAL>
                    path /pub/products/[wwww]
                    latency 12 days
                </FINAL>
                <RAPID>
                    path /pub/products/[wwww]
                    latency 17 hours
                </RAPID>
                <ULTRA>
                    path /pub/products/[wwww]
                    latency 3 hours
                </ULTRA>
            </ERP>
            <CLK>
                <FINAL>
                    path /pub/products/[wwww]
                    supply_frequency weekly
                    latency 12 days
                </FINAL>
                <RAPID>
                    path /pub/products/[wwww]
                    latency 17 hours
                </RAPID>
            </CLK>
        </Datafiles>
    </DataCenter>
    
    # CDDIS RINEX 3 filenames.  
    #
    # <DataCenter>
    #     priority 45
    #     Name CDDIS3
    #     CredentialsFile ${CDDIS_CREDENTIALS_FILE||/etc/bernese52/cddis_credentials.txt}
    #     Uri https://cddis.nasa.gov/archive/gnss
    #     FileListUriPath /data/daily/[yyyy]/[ddd]/[yy]d/*?list
    #     Stations mac1 mcm4 mobs pert yarr yar2 yarr nnor karr darr darw
    #     Stations sunm cedu alic sydn str1 str2 tid2 tid1 tidb coco lae1
    #     Stations fale aspa cas1 dav1 davr mkea tow2 jab1 noum
    #     Stations *
    #     NotStations @geonet @privatecors
    #     <Datafiles>
    #         <OBS>
    #             <DAILY>
    #                 path /data/daily/[yyyy]/[ddd]/[yy]d
    #                 filename [SSSS]0????_R_[yyyy][ddd]0000_01D_30S_MO.crx.gz
    #             </DAILY>
    #         </OBS>
    #     </Datafiles>
    # </DataCenter>
    
    <DataCenter>
        priority 40
        Name CDDIS
        CredentialsFile ${CDDIS_CREDENTIALS_FILE||/etc/bernese52/cddis_credentials.txt}
        Uri https://cddis.nasa.gov/archive/gnss
        Stations mac1 mcm4 mobs pert yarr yar2 yarr nnor karr darr darw
        Stations sunm cedu alic sydn str1 str2 tid2 tid1 tidb coco lae1
        Stations fale aspa cas1 dav1 davr mkea tow2 jab1 noum
        Stations *
        NotStations @geonet @privatecors
        <Datafiles>
            <OBS>
                <DAILY>
                    path /data/daily/[yyyy]/[ddd]/[yy]d
                    filename [ssss][ddd]0.[yy]d.gz
                </DAILY>
                <HOURLY>
                    path /data/hourly/[yyyy]/[ddd]/[hh]
                    filename [ssss][ddd][h].[yy]d.gz
                </HOURLY>
            </OBS>
            <ORB>
                <FINAL>
                    path /products/[wwww]
                    supply_frequency weekly
                    latency 12 days
                </FINAL>
                <RAPID>
                    latency 17 hours
                    path /products/[wwww]
                </RAPID>
                <ULTRA>
                    latency 3 hours
                    path /products/[wwww]
                </ULTRA>
            </ORB>
            <ERP>
                <FINAL>
                    path /products/[wwww]
                    latency 12 days 
                </FINAL>
                <RAPID>
                    path /products/[wwww]
                    latency 17 hours
                </RAPID>
                <ULTRA>
                    path /products/[wwww]
                    latency 3 hours
                </ULTRA>
            </ERP>
            <CLK>
                <FINAL>
                    path /products/[wwww]
                    supply_frequency weekly
                    latency 12 days
                </FINAL>
                <RAPID>
                    path /products/[wwww]
                    latency 17 hours
                </RAPID>
            </CLK>
	    <IGSC>
               <WEEKLY>
                   path /products/[wwww]
               </WEEKLY>
               <DAILY>
                   path /products/[wwww]
               </DAILY>
	    </IGSC>
        </Datafiles>
    </DataCenter>
    
    <DataCenter>
        priority 40
        Name IGN
        Uri ftp://anonymous:positionz@linz.govt.nz@igs.ign.fr
        Stations owng
        Stations *
        Notstations @geonet @privatecors
        <Datafiles>
            <OBS>
                <DAILY>
                    path /pub/igs/data/[yyyy]/[ddd]
                </DAILY>
                <HOURLY>
                    path /pub/igs/data/hourly/[yyyy]/[ddd]
                </HOURLY>
            </OBS>
            <ORB>
                <FINAL>
                    path /pub/igs/products/[wwww]
                    supply_frequency weekly
                    latency 12 days
                </FINAL>
                <RAPID>
                    latency 17 hours
                    path /pub/igs/products/[wwww]
                </RAPID>
                <ULTRA>
                    latency 3 hours
                    path /pub/igs/products/[wwww]
                </ULTRA>
            </ORB>
            <ERP>
                <FINAL>
                    path /pub/igs/products/[wwww]
                    latency 12 days 
                </FINAL>
                <RAPID>
                    path /pub/igs/products/[wwww]
                    latency 17 hours
                </RAPID>
                <ULTRA>
                    path /pub/igs/products/[wwww]
                    latency 3 hours
                </ULTRA>
            </ERP>
            <CLK>
                <FINAL>
                    path /pub/igs/products/[wwww]
                    supply_frequency weekly
                    latency 12 days
                </FINAL>
                <RAPID>
                    path /pub/igs/products/[wwww]
                    latency 17 hours
                </RAPID>
            </CLK>
        </Datafiles>
    </DataCenter>


    <DataCenter>
        priority 30
        name CODE
        Uri ftp://anonymous:positionz@linz.govt.nz@ftp.aiub.unibe.ch
        AlternativeUri http://ftp.aiub.unibe.ch
        <Datafiles>
#        <INX>
#           <FINAL>
#               latency 2 days
#               path /CODE/[yyyy]
#           </FINAL>
#        </INX>
        <CLK>
           <CODE>
               latency 10 days
               filename COD[wwww][d].CLK.Z
               path CODE/[yyyy]
           </CODE>
        </CLK>
        <ERP>
           <CODE>
               latency 10 days
               filename COD[wwww][d].ERP.Z
               path CODE/[yyyy]
           </CODE>
           <CO2>
               filename COD[wwww][d].ERP.Z
               path REPRO_2013/CODE/[yyyy]
           </CO2>
           <CODE_MGEX>
               latency 7 days
               filename COM[wwww][d].ERP.Z
               path CODE_MGEX/CODE/[yyyy]
           </CODE_MGEX>
        </ERP>
        <ORB>
           <CODE>
               latency 10 days
               filename COD[wwww][d].EPH.Z
               path CODE/[yyyy]
           </CODE>
           <CO2>
               filename COD[wwww][d].EPH.Z
               path REPRO_2013/CODE/[yyyy]
           </CO2>
           <CODE_MGEX>
               latency 7 days
               filename COM[wwww][d].EPH.Z
               path CODE_MGEX/CODE/[yyyy]
           </CODE_MGEX>
        </ORB>
        <TRP>
           <FINAL>
               latency 2 days
               path /BSWUSER52/ATM/[yyyy]
           </FINAL>
        </TRP>
        <ION>
           <FINAL>
               latency 0.5 days
               path /CODE/[yyyy]
           </FINAL>
           <RAPID>
               latency 0 days
               filename COD[wwww][d].ION_R
               path /CODE
           </RAPID>
           <PREDICT>
               filename COD[wwww][d].ION_P
               path /CODE
           </PREDICT>
        </ION>
        <P1C1>
           <FINAL>
               path /CODE/[yyyy]
               filename P1C1[yy][mm].DCB.Z
           </FINAL>
           <RAPID>
               expires 32 days
               path /CODE
               filename P1C1.DCB
           </RAPID>
        </P1C1>
        <P1P2>
           <FINAL>
               path /CODE/[yyyy]
               filename P1P2[yy][mm].DCB.Z
           </FINAL>
           <RAPID>
               expires 32 days
               path /CODE
               filename P1P2.DCB
           </RAPID>
        </P1P2>
        </Datafiles>
    </DataCenter>

    <DataCenter>
        priority 20
        name GGOS
        Uri https://vmf.geo.tuwien.ac.at
        <DataFiles>
        <VMF>
           <VMF>
               latency 8 hours
               path /trop_products/GRID/2.5x2/VMF1/VMF1_OP/[yyyy]
           </VMF>
        </VMF>
        </DataFiles>
    </DataCenter>

    # Second GGOS site: To deal with gzipped files from 1997 up to and including
    # 2008

    <DataCenter>
        priority 19
        name GGOS_2
        Uri https://vmf.geo.tuwien.ac.at
        <DataFiles>
        <VMF>
           <VMF>
               filename VMFG_[yyyy][mm][dd].H[hh].gz
               latency 8 hours
               path /trop_products/GRID/2.5x2/VMF1/VMF1_OP/[yyyy]
           </VMF>
        </VMF>
        </DataFiles>
    </DataCenter>

    # Second GeoNET site: Separate instance to avoid non PositioNZ GNS stations 
    # having higher priority than IGS stations
    <DataCenter>
        priority 10
        Name GeoNET
        Uri https://data.geonet.org.nz
#        Uri ftp://anonymous:positionz@linz.govt.nz@ftp.geonet.org.nz
        Stations @geonet
        <Datafiles>
            <OBS>
                <DAILY>
            	    filename [ssss][ddd]0.[yy]o.gz
                    path /gnss/rinex/[yyyy]/[ddd]
                </DAILY>
                <HOURLY>
            	    filename [ssss][ddd][h].[yy]o.gz
                    path /gnss/rinexhourly/[yyyy]/[ddd]
                    latency 15 minutes
                </HOURLY>
            </OBS>
        </Datafiles>
    </DataCenter>
 
#    <DataCenter>
#        priority 25
#        name PrivateCorsData
#        Stations @privatecors
#        Uri s3://${LINZ_GNSS_DATA_S3||linz-gnss-data-prod}/data/RINEX2
#        <DataFiles>
#            <OBS>
#                <DAILY>
#                    priority 2
#                    path  [yyyy]/[ddd]
#                    filename [ssss][DDD]0.[YY]d.gz
#                </DAILY>
#            </OBS>
#      </Datafiles>
#    </DataCenter>

    <DataCenter>
        priority 0
        Name Cache
        Stations *
	Uri  file://${D}
    </DataCenter>


    <DataCenter>
        priority 0
        name bernese
        Stations *
        Uri file://${P}
        <DataFiles>
            <OBS>
                <DAILY>
                    priority 2
                    filename [SSSS][DDD]0.[YY]O
                    path  [JOB]/RAW
                </DAILY>
                <HOURLY>
                    priority 1
                    filename [SSSS][DDD][H].[YY]O
                    path  [JOB]/RAW
                </HOURLY>
            </OBS>
            <ORB>
                <BROADCAST>
                    filename AUTO[ddd]0.[yy]N
                    path  [JOB]/RAW
                </BROADCAST>
                <CODE>
                    filename COD[wwww][d].PRE
                    path [JOB]/ORB
                </CODE>
                <CO2>
                    filename CO2[wwww][d].PRE
                    path [JOB]/ORB
                </CO2>
                <CODE_MGEX>
                    filename COM[wwww][d].PRE
                    path [JOB]/ORB
                </CODE_MGEX>
                <FINAL>
                    priority 4
                    filename IGS[WWWW][D].PRE
                    path  [JOB]/ORB
                </FINAL>
                <RAPID>
                    priority 3
                    filename IGR[WWWW][D].PRE
                    path  [JOB]/ORB
                </RAPID>
                <ULTRA>
                    priority 2
                    filename IGU[WWWW][D][HH].PRE
                    path  [JOB]/ORB
                </ULTRA>
            </ORB>
            <ERP>
                <CODE>
                    filename COD[wwww][d].IEP
                    path [JOB]/ORB
                </CODE>
                <CO2>
                    filename CO2[wwww][d].IEP
                    path [JOB]/ORB
                </CO2>
                <CODE_MGEX>
                    filename COM[wwww][d].IEP
                    path [JOB]/ORB
                </CODE_MGEX>
                <FINAL>
                    priority 4
                    filename IGS[WWWW]7.IEP
                    path  [JOB]/ORB
                </FINAL>
                <RAPID>
                    priority 3
                    filename IGR[WWWW][D].IEP
                    path  [JOB]/ORB
                </RAPID>
                <ULTRA>
                    priority 2
                    filename IGU[WWWW][D][HH].IEP
                    path  [JOB]/ORB
                </ULTRA>
            </ERP>
            <CLK>
                <CODE>
                    priority 4
                    filename COD[WWWW][D].CLK
                    path  [JOB]/OUT
                </CODE>
                <FINAL>
                    priority 4
                    filename IGS[WWWW][D].CLK
                    path  [JOB]/OUT
                </FINAL>
                <RAPID>
                    priority 3
                    filename IGR[WWWW][D].CLK
                    path  [JOB]/OUT
                </RAPID>
            </CLK>
            <ION>
                <FINAL>
                    filename COD[wwww][d].ION
                    path [JOB]/ATM
                </FINAL>
                <RAPID>
                    filename COD[wwww][d].ION
                    path [JOB]/ATM
                </RAPID>
                <PREDICT>
                    filename COD[wwww][d]P.ION
                    path [JOB]/ATM
                </PREDICT>
            </ION>
#            <INX>
#                <FINAL>
#                    filename COD[wwww][d].INX
#                    path [JOB]/ATM
#                </FINAL>
#            </INX>
            <TRP>
                <FINAL>
                    filename COD[wwww][d].TRP
                    path [JOB]/ATM
                </FINAL>
            </TRP>
            <P1C1>
               <FINAL>
                   path [JOB]/ORB
                   filename P1C1[yy][mm].DCB
               </FINAL>
               <RAPID>
                   path [JOB]/ORB
                   filename P1C1[yy][mm].DCB
               </RAPID>
            </P1C1>
            <P1P2>
               <FINAL>
                   path [JOB]/ORB
                   filename P1P2[yy][mm].DCB
               </FINAL>
               <RAPID>
                   path [JOB]/ORB
                   filename P1P2[yy][mm].DCB
               </RAPID>
            </P1P2>

            <VMF>
                <VMF>
                    filename VMF[WWWW][D][HH].GRD
                    path [JOB]/GRD
                </VMF>
            </VMF>
            <IGSC>
               <WEEKLY>
                    filename IGS[yy]P[wwww].SNX
                    path [JOB]/SOL
               </WEEKLY>
               <DAILY>
                    filename IGS[yy]P[wwww][d].SNX
                    path [JOB]/SOL
               </DAILY>
            </IGSC>
        </DataFiles>
    </DataCenter>
</DataCenters>

<Cache>
    datacenter cache
    # Number of days a job will be retained by default before being purged
    job_retention 28
    # Queued data latency in seconds. 
    # Time allowed for a queued request to be processed, added
    # to the data available time to suggest the next time for checking for the data
    queue_latency 1800
</Cache>

# LogSettings: The logging for the Product Manager. These must follow log4perl
# config rules.

LogDir /var/log/bernese52/getdata
LogFile getdata-${year}-${month}.log
LogFileRetention 365

LogSettings <<EOF
 log4perl.logger                                    = INFO,Logfile
# ##############################################################################
# # Config for the STDOUT Appender
# ##############################################################################
# log4perl.appender.Screen                           = Log::Log4perl::Appender::Screen
# log4perl.appender.Screen.layout                    = Log::Log4perl::Layout::PatternLayout
# log4perl.appender.Screen.stderr                    = 0
# log4perl.appender.Screen.layout.ConversionPattern  = %d %p> %F{1}:%L - %m%n
# ##############################################################################
# # Config for the Log file Appender (will rotate the file once it is bigger
# # than 5 Mb )
# ##############################################################################
log4perl.appender.Logfile                          = Log::Log4perl::Appender::File
log4perl.appender.Logfile.filename                 = [logfilename]
log4perl.appender.Logfile.mode                     = append
log4perl.appender.Logfile.umask                    = 0002
log4perl.appender.Logfile.layout                   = Log::Log4perl::Layout::PatternLayout
log4perl.appender.Logfile.layout.ConversionPattern = %d %p> %F{1}:%L - %m%n
log4perl.appender.Logfile.TZ                       = NZDT
EOF
